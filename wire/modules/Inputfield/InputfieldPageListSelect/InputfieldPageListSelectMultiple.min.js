var InputfieldPageListSelectMultiple={init:function(a){if(a.hasClass("InputfieldPageListSelectMultipleData")){var b=a}else{var b=a.find(".InputfieldPageListSelectMultipleData")}if(!b.length){return}if(b.hasClass("InputfieldPageListSelectMultipleInit")){return}b.ProcessPageList({mode:"select",rootPageID:b.attr("data-root"),selectShowPageHeader:false,selectSelectHref:b.attr("data-href"),selectStartLabel:b.attr("data-start"),selectCancelLabel:b.attr("data-cancel"),selectSelectLabel:b.attr("data-select"),selectUnselectLabel:b.attr("data-unselect"),moreLabel:b.attr("data-more"),labelName:b.attr("data-labelName")}).hide().addClass("InputfieldPageListSelectMultipleInit");b.bind("pageSelected",b,InputfieldPageListSelectMultiple.pageSelected);InputfieldPageListSelectMultiple.initList($("#"+b.attr("id")+"_items"))},initList:function(a){var b=function(c){c.sortable({axis:"y",update:function(f,d){InputfieldPageListSelectMultiple.rebuildInput($(this))},start:function(f,d){d.item.addClass("ui-state-highlight")},stop:function(f,d){d.item.removeClass("ui-state-highlight")}});c.addClass("InputfieldPageListSelectMultipleSortable")};$("#"+a.attr("id")).on("mouseover",">li",function(){$(this).removeClass("ui-state-default").addClass("ui-state-hover");if(!a.is(".InputfieldPageListSelectMultipleSortable")){b(a)}}).on("mouseout",">li",function(){$(this).removeClass("ui-state-hover").addClass("ui-state-default")});a.on("click","a.itemRemove",function(){var e=$(this).parent();var c=e.parent();var d=e.children(".itemValue").text();e.remove();InputfieldPageListSelectMultiple.rebuildInput(c);return false})},pageSelected:function(c,b){$input=c.data;var a=$("#"+$input.attr("id")+"_items");var d=a.children(".itemTemplate").clone();d.removeClass("itemTemplate");d.children(".itemValue").text(b.id);d.children(".itemLabel").text(b.title);a.append(d);InputfieldPageListSelectMultiple.rebuildInput(a)},rebuildInput:function(a){var d=a.attr("id");d=d.substring(0,d.lastIndexOf("_"));var c=$("#"+d);var b="";a.children(":not(.itemTemplate)").each(function(){if(b.length>0){b+=","}b+=$(this).children(".itemValue").text()});c.val(b);c.change()}};$(document).ready(function(){$(".InputfieldPageListSelectMultiple").each(function(){InputfieldPageListSelectMultiple.init($(this))});$(document).on("reloaded",".InputfieldPageListSelectMultiple, .InputfieldPage",function(){InputfieldPageListSelectMultiple.init($(this))})});